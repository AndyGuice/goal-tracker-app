(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{142:function(e,t,a){e.exports=a(176)},152:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),l=a(10),c=a(68),s=a(111),u=(a(152),a(8)),m="START_LOADING",p="END_LOADING",d="ERROR",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(u.a)({},null===t||void 0===t?void 0:t.data))),Object(u.a)(Object(u.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data,loading:!1,errors:null});case"LOGOUT":return localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{authData:null,loading:!1,errors:null});default:return e}},g=a(16),h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d:return Object(u.a)(Object(u.a)({},t),{},{error:null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error});default:return t}},E=Object(c.b)({auth:f,forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,forms:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case p:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1});case"FETCH_ALL":return Object(u.a)(Object(u.a)({},e),{},{forms:t.payload.data});case"FETCH_FORM":return Object(u.a)(Object(u.a)({},e),{},{form:t.payload.form});case"CREATE":return Object(u.a)(Object(u.a)({},e),{},{forms:[].concat(Object(g.a)(e.forms),[t.payload])});case"UPDATE_SUCCESSFUL":return Object(u.a)(Object(u.a)({},e),{},{updateSuccessful:null===t||void 0===t?void 0:t.payload});case"DELETE":return Object(u.a)(Object(u.a)({},e),{},{movies:e.forms.filter((function(e){return e._id!==t.payload}))});case"DELETE_SUCCESSFUL":return Object(u.a)(Object(u.a)({},e),{},{deleteSuccessful:null===t||void 0===t?void 0:t.payload});default:return e}},goals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,goals:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case p:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1});case"FETCH_ALL":case"FETCH_GOALS":return Object(u.a)(Object(u.a)({},e),{},{goals:t.payload.data});case"FETCH_GOAL":return Object(u.a)(Object(u.a)({},e),{},{goal:t.payload.goal});case"CREATE":return Object(u.a)(Object(u.a)({},e),{},{goals:[].concat(Object(g.a)(e.goals),[t.payload])});case"UPDATE_SUCCESSFUL":return Object(u.a)(Object(u.a)({},e),{},{updateSuccessful:null===t||void 0===t?void 0:t.payload});case"DELETE":return Object(u.a)(Object(u.a)({},e),{},{movies:e.goals.filter((function(e){return e._id!==t.payload}))});case"DELETE_SUCCESSFUL":return Object(u.a)(Object(u.a)({},e),{},{deleteSuccessful:null===t||void 0===t?void 0:t.payload});default:return e}},answers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ANSWERS":return Object(u.a)(Object(u.a)({},e),{},{answers:t.payload});case"ADD_ANSWER_SUCCESSFUL":return Object(u.a)(Object(u.a)({},e),{},{addAnswerSuccessful:null===t||void 0===t?void 0:t.payload});default:return e}},error:h}),b=a(31),v=a(246),O=a(129),y=a(6),x=a(213),j=a(253),C=a(216),S=Object(x.a)((function(e){return Object(j.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logout:{marginLeft:"20px"},userName:{display:"flex",alignItems:"center",textAlign:"center"},purple:{color:e.palette.getContrastText(C.a[500]),backgroundColor:C.a[500],marginRight:"20px"}})})),w=a(217),T=a(219),k=a(133),D=a(177),N=a(17),L=a(113),I=a(254),q=function(){var e=S(),t=Object(N.g)(),a=Object(N.h)(),o=localStorage.getItem("profile"),i=Object(n.useState)(JSON.parse(o)),c=Object(y.a)(i,2),s=c[0],u=c[1],m=Object(l.b)(),p=function(){m({type:"LOGOUT"}),t.push("/"),u(null)};return Object(n.useEffect)((function(){var e=null===s||void 0===s?void 0:s.token;e&&(1e3*Object(L.a)(e).exp<(new Date).getTime()&&p());u(JSON.parse(o))}),[a]),r.a.createElement("div",{className:e.root,style:{position:"absolute",left:"0",top:"0"}},r.a.createElement(w.a,{color:"primary"},r.a.createElement(T.a,null,r.a.createElement(k.a,{variant:"h6",className:e.title,align:"left"},r.a.createElement(b.b,{to:"/",style:{textDecoration:"none",color:"#fff"}},"Goal Tracker")),(null===s||void 0===s?void 0:s.result)?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(I.a,{className:e.purple,alt:null===s||void 0===s?void 0:s.result.name,src:null===s||void 0===s?void 0:s.result.imageUrl},null===s||void 0===s?void 0:s.result.name.charAt(0)),r.a.createElement(k.a,{className:e.userName,variant:"h6"},null===s||void 0===s?void 0:s.result.name),r.a.createElement(D.a,{variant:"contained",style:{marginLeft:"20px"},color:"secondary",onClick:p},"Logout")):r.a.createElement(D.a,{color:"primary",style:{border:"1px solid black",backgroundColor:"#FFF"},onClick:function(){return t.push("/loginUser")}},"Sign In"))))},A=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null),t)},W=a(46),_=a(12),F=a.n(_),U=a(19),P=a(228),M=a(132),B=a(220),G=a(114),R=a(82),H=a.n(R),z=a(115),J=a.n(z).a.create({baseURL:"http://localhost:5000"});J.interceptors.request.use((function(e){if(localStorage.getItem("profile")){var t=localStorage.getItem("profile")||"";e.headers.Authorization="Bearer ".concat(JSON.parse(t).token)}return e})),J.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status?window.location.assign("/loginUser"):500===e.response.status&&alert("Server error"),e}));var Q=function(e){return J.post("/user/signin",e)},Y=function(e){return J.post("/user/signup",e)},V=function(e){return J.get("/goals/".concat(e))},X=function(e){return J.post("/goals",e)},Z=function(e){return J.delete("/goals/".concat(e))},K=function(e){return J.get("/forms/".concat(e))},$=function(e){return J.post("/forms",e)},ee=function(e){return J.delete("/forms/".concat(e))},te=function(e){return J.get("/answers/".concat(e))},ae=function(e){return J.post("/answers/".concat(e.formId),{formAnswer:e})},ne=function(){return r.a.createElement("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"}))},re=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)},alert:{backgroundColor:"#f50057"}}})),oe=a(255),ie=a(227),le=a(134),ce=a(116),se=a.n(ce),ue=a(117),me=a.n(ue),pe=function(e){var t=e.name,a=e.handleChange,n=e.label,o=e.half,i=e.autoFocus,l=e.type,c=e.handleShowPassword;return r.a.createElement(B.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(oe.a,{color:"primary",name:t,onChange:a,variant:"outlined",fullWidth:!0,label:n,autoFocus:i,type:l,InputProps:"password"===t||"confirmPassword"===t?{endAdornment:r.a.createElement(ie.a,{position:"end"},r.a.createElement(le.a,{onClick:c},"password"===l?r.a.createElement(se.a,null):r.a.createElement(me.a,null)))}:r.a.createElement(r.a.Fragment,null)}))},de=a(251),fe=a(248),ge=function(e){return r.a.createElement(fe.a,Object.assign({elevation:6,variant:"filled"},e))},he={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Ee=function(){var e=Object(l.c)((function(e){return e.error})).error,t=Object(n.useState)(he),a=Object(y.a)(t,2),o=a[0],i=a[1],c=Object(l.b)(),s=Object(N.g)(),m=re(),p=Object(n.useState)(!1),f=Object(y.a)(p,2),g=f[0],h=f[1],E=r.a.useState(!1),b=Object(y.a)(E,2),v=b[0],O=b[1];Object(n.useEffect)((function(){e&&(O(!0),c({type:d,data:null}))}),[e]);var x=function(e,t){"clickaway"!==t&&O(!1)},j=function(){var t=Object(U.a)(F.a.mark((function t(a){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null===a||void 0===a?void 0:a.profileObj,r=null===a||void 0===a?void 0:a.tokenId;try{c({type:"AUTH",data:{result:n,token:r}}),s.push("/")}catch(e){console.log(e)}case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(e){return i(Object(u.a)(Object(u.a)({},o),{},Object(W.a)({},e.target.name,e.target.value)))};return r.a.createElement(P.a,{component:"main",maxWidth:"xs",style:{marginTop:"80px"}},r.a.createElement(M.a,{className:m.paper,elevation:6},r.a.createElement(I.a,{className:m.avatar},r.a.createElement(H.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:m.form,onSubmit:function(e){var t,a;e.preventDefault(),c((t=o,a=s,function(){var e=Object(U.a)(F.a.mark((function e(n){var r,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q(t);case 3:if(r=e.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){e.next=8;break}return n({type:d,data:o}),e.abrupt("return",a.push("/loginUser"));case 8:n({type:"AUTH",data:o}),a.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(pe,{name:"email",label:"Email Address",handleChange:C,type:"email"}),r.a.createElement(pe,{name:"password",label:"Password",handleChange:C,type:g?"text":"password",handleShowPassword:function(){return h(!g)}})),r.a.createElement(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:m.submit},"Sign In"),r.a.createElement(G.GoogleLogin,{clientId:"564033717568-bu2nr1l9h31bhk9bff4pqbenvvoju3oq.apps.googleusercontent.com",render:function(e){return r.a.createElement(D.a,{className:m.googleButton,color:"primary",fullWidth:!0,onClick:e.onClick,disabled:e.disabled,startIcon:r.a.createElement(ne,null),variant:"contained"},"Google Sign In")},onSuccess:j,onFailure:function(){return console.log("Google Sign In was unsuccessful. Try again later")},cookiePolicy:"single_host_origin"}),r.a.createElement(B.a,{container:!0,justify:"flex-end"},r.a.createElement(B.a,{item:!0},r.a.createElement(D.a,{onClick:function(){return s.push("/register")},color:"primary"},"Don't have an account? Sign Up"))))),r.a.createElement(de.a,{open:v,autoHideDuration:6e3,onClose:x},r.a.createElement(ge,{onClose:x,severity:"info",className:m.alert},"Invalid Credentials")))},be=function(){return r.a.createElement("div",null,"UNAUTHORIZED")},ve=a(118),Oe={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},ye=function(){var e=Object(l.c)((function(e){return e.error})).error,t=Object(n.useState)(Oe),a=Object(y.a)(t,2),o=a[0],i=a[1],c=Object(l.b)(),s=Object(N.g)(),m=re(),p=Object(n.useState)(!1),f=Object(y.a)(p,2),g=f[0],h=f[1],E=Object(n.useState)(!1),b=Object(y.a)(E,2),v=b[0],O=b[1];Object(n.useEffect)((function(){e&&O(!0)}),[e]);var x=function(e,t){"clickaway"!==t&&(c({type:d,data:null}),O(!1))},j=function(e){return i(Object(u.a)(Object(u.a)({},o),{},Object(W.a)({},e.target.name,e.target.value)))};return r.a.createElement(P.a,{component:"main",maxWidth:"xs",style:{marginTop:"80px"}},r.a.createElement(M.a,{className:m.paper,elevation:6},r.a.createElement(I.a,{className:m.avatar},r.a.createElement(H.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:m.form,onSubmit:function(e){return e.preventDefault(),o.password!==o.confirmPassword?c({type:d,data:{error:"Passwords are not equal"}}):ve.validate(o.email)?void c((t=o,a=s,function(){var e=Object(U.a)(F.a.mark((function e(n){var r,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t);case 3:if(r=e.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){e.next=8;break}return n({type:d,data:o}),e.abrupt("return",a.push("/register"));case 8:n({type:"AUTH",data:o}),a.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())):c({type:d,data:{error:"Wrong email format"}});var t,a}},r.a.createElement(B.a,{container:!0,spacing:2},r.a.createElement(pe,{name:"firstName",label:"First Name",handleChange:j,autoFocus:!0,half:!0}),r.a.createElement(pe,{name:"lastName",label:"Last Name",handleChange:j,half:!0}),r.a.createElement(pe,{name:"email",label:"Email Address",handleChange:j,type:"email"}),r.a.createElement(pe,{name:"password",label:"Password",handleChange:j,type:g?"text":"password",handleShowPassword:function(){return h(!g)}}),r.a.createElement(pe,{name:"confirmPassword",label:"Repeat Password",handleChange:j,type:g?"text":"password",handleShowPassword:function(){return h(!g)}})),r.a.createElement(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:m.submit},"Sign Up"),r.a.createElement(B.a,{container:!0,justify:"flex-end"},r.a.createElement(B.a,{item:!0},r.a.createElement(D.a,{onClick:function(){return s.push("/loginUser")},color:"primary"},"Already have an account? Sign in"))))),r.a.createElement(de.a,{open:v,autoHideDuration:6e3,onClose:x},r.a.createElement(ge,{onClose:x,severity:"info",className:m.alert},e)))},xe=a(232),je=a(225),Ce=Object(x.a)((function(e){return Object(j.a)({root:{flexGrow:1,height:"220px"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"4px",height:"75vh",width:"100%",marginTop:"20px"},title:{fontSize:14}})})),Se=function(e){return function(){var t=Object(U.a)(F.a.mark((function t(a){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:m}),t.next=4,K(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_FORM",payload:{form:r}}),a({type:p}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},we=a(229),Te=a(230),ke=a(231),De=a(84),Ne=a.n(De),Le=a(83),Ie=a.n(Le),qe=a(119),Ae=a.n(qe),We=a(120),_e=a.n(We),Fe=function(e){var t,a=Ce(),o=Object(N.g)(),i=Object(l.b)(),c=localStorage.getItem("profile"),s=JSON.parse(c),u=Object(n.useState)(0),d=Object(y.a)(u,2),f=d[0],g=d[1];return Object(n.useEffect)((function(){(function(){var t=Object(U.a)(F.a.mark((function t(){var a,n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e.form._id);case 2:a=t.sent,n=a.data,g(n.length);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.form._id]),r.a.createElement(B.a,{item:!0,xs:12,md:6,lg:3,style:{marginTop:"10px"}},r.a.createElement(we.a,{className:a.root,raised:!0},r.a.createElement(Te.a,null,r.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},e.form.title),r.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p",gutterBottom:!0,noWrap:!0},"Description: ",e.form.description),r.a.createElement(k.a,{className:a.title,color:"textSecondary",gutterBottom:!0,noWrap:!0},"Questions' number: ",e.form.sections.length),r.a.createElement(k.a,{className:a.title,color:"textSecondary",gutterBottom:!0,noWrap:!0},"Answers' number: ",f)),r.a.createElement(ke.a,null,r.a.createElement(le.a,{title:"Add answer","aria-label":"answer",onClick:function(){return o.push("/answerForm/".concat(e.form._id))}},r.a.createElement(Ae.a,{fontSize:"large",color:"secondary"})),r.a.createElement(le.a,{title:"All answers","aria-label":"answer",onClick:function(){return o.push("showAnswers/".concat(e.form._id))}},r.a.createElement(_e.a,{fontSize:"large",color:"secondary"})),s&&0!==Object.keys(s).length&&(null===s||void 0===s||null===(t=s.result)||void 0===t?void 0:t._id)===e.form.userId&&r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{title:"Edit form","aria-label":"edit",onClick:function(){return o.push("/editForm/".concat(e.form._id))}},r.a.createElement(Ie.a,{fontSize:"large",color:"secondary"})),r.a.createElement(le.a,{title:"Delete form","aria-label":"delete",onClick:function(){return i(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,ee(e);case 4:return n({type:"DELETE",payload:e}),n({type:"DELETE_SUCCESSFUL",payload:!0}),n({type:p}),a.abrupt("return",t.push("/"));case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(e.form._id,o))}},r.a.createElement(Ne.a,{fontSize:"large",color:"secondary"}))))))},Ue=function(){var e=Object(l.c)((function(e){return e.forms})),t=e.forms,a=e.isLoading,o=e.updateSuccessful,i=e.deleteSuccessful,c=Object(l.c)((function(e){return e.answers})).addAnswerSuccessful,s=Object(N.g)(),u=Ce(),d=Object(l.b)(),f=localStorage.getItem("profile"),g=Object(n.useState)(!1),h=Object(y.a)(g,2),E=h[0],b=h[1],v=Object(n.useState)(!1),O=Object(y.a)(v,2),x=O[0],j=O[1],C=Object(n.useState)(!1),S=Object(y.a)(C,2),w=S[0],T=S[1],k=Object(n.useState)(JSON.parse(f)),L=Object(y.a)(k,2),I=L[0];L[1];Object(n.useEffect)((function(){o&&b(!0)}),[o]),Object(n.useEffect)((function(){i&&j(i)}),[i]),Object(n.useEffect)((function(){c&&T(c)}),[c]),Object(n.useEffect)((function(){d(function(){var e=Object(U.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:m}),e.next=4,J.get("/forms");case 4:a=e.sent,n=a.data.data,t({type:"FETCH_ALL",payload:{data:n}}),t({type:p}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[d]);var q=function(e,t){"clickaway"!==t&&(d({type:"UPDATE_SUCCESSFUL",payload:!1}),b(!1))},A=function(e,t){"clickaway"!==t&&(d({type:"DELETE_SUCCESSFUL",payload:!1}),j(!1))},W=function(e,t){"clickaway"!==t&&(d({type:"ADD_ANSWER_SUCCESSFUL",payload:!1}),T(!1))};return r.a.createElement(P.a,{style:{marginTop:"100px"}},(null===I||void 0===I?void 0:I.result)&&r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return s.push("/addForm")}},"Add form"),a?r.a.createElement(M.a,{elevation:6,className:u.loadingPaper},r.a.createElement(xe.a,{size:"7em",color:"primary",value:100})):r.a.createElement(je.a,{in:!0,timeout:{enter:1500}},r.a.createElement(B.a,{container:!0,spacing:3},null===t||void 0===t?void 0:t.map((function(e,t){return r.a.createElement(Fe,{form:e,key:t})})))),r.a.createElement(de.a,{open:E,autoHideDuration:6e3,onClose:q},r.a.createElement(ge,{onClose:q,severity:"success"},"Edit successful")),r.a.createElement(de.a,{open:x,autoHideDuration:6e3,onClose:A},r.a.createElement(ge,{onClose:A,severity:"success"},"Delete successful")),r.a.createElement(de.a,{open:w,autoHideDuration:6e3,onClose:W},r.a.createElement(ge,{onClose:W,severity:"success"},"Adding answer successful")))},Pe=a(38),Me=a(235),Be=a(258),Ge=Object(x.a)((function(e){return Object(j.a)({root:{},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},icon:{margin:e.spacing(1)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},underlineLinear:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"20px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"20px"}},typographyLinear:{maxWidth:"150px",paddingTop:"30px"},singleChoiceOption:{fontSize:"13px",color:"#3f51b5","&:hover":{cursor:"pointer"}},singleChoiceButtonsContainer:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},singleChoiceOptionMargin:{marginLeft:"140px","&:hover":{cursor:"pointer"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),Re=a(86),He=a.n(Re),ze=a(223),Je=a(224),Qe=a(247),Ye=a(257),Ve=a(236),Xe=a(179),Ze=a(233),Ke=a(237),$e=a(28),et=a(123),tt=a.n(et),at=a(121),nt=a.n(at),rt=a(122),ot=a.n(rt),it=a(124),lt=a.n(it),ct=a(125),st=a.n(ct),ut=function e(){Object($e.a)(this,e)};ut.SHORT_TEXT={icon:r.a.createElement(nt.a,null),text:"Short answer",value:"shortText"},ut.LONG_TEXT={icon:r.a.createElement(ot.a,null),text:"Long answer",value:"longText"},ut.SINGLE_CHOICE={icon:r.a.createElement(tt.a,null),text:"Single choice",value:"singleChoice"},ut.MULTIPLE_CHOICE={icon:r.a.createElement(lt.a,null),text:"Multiple Choice",value:"multipleChoice"},ut.LINEAR_SCALE={icon:r.a.createElement(st.a,null),text:"Linear scale",value:"linearScale"};var mt=a(127),pt=a.n(mt),dt=a(249),ft=a(234),gt=function(e){var t=e.handleLinearScale,a=e.index,o=e.section,i=void 0===o?null:o,l=Ge(),c=Object(n.useState)(0),s=Object(y.a)(c,2),u=s[0],m=s[1],p=Object(n.useState)(5),d=Object(y.a)(p,2),f=d[0],g=d[1],h=Object(n.useState)(""),E=Object(y.a)(h,2),b=E[0],v=E[1],O=Object(n.useState)(""),x=Object(y.a)(O,2),j=x[0],C=x[1];Object(n.useEffect)((function(){i&&(m(i.linearDetails.min),v(i.linearDetails.minText),g(i.linearDetails.max),C(i.linearDetails.maxText))}),[i]),Object(n.useEffect)((function(){var e={min:u,max:f,minText:b.trim(),maxText:j.trim()};t(e,a)}),[u,b,f,j]);var S=function(e,t){var a=t.target.name,n=t.target.value;"min"===a?m(n):"minText"===a?v(n.trim()):"max"===a?g(n):"maxText"===a&&C(n.trim())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(ze.a,{className:l.formControl},r.a.createElement(Qe.a,{name:"min",value:u,onChange:function(e){return S(0,e)},variant:"outlined"},r.a.createElement(Ye.a,{value:0},"0"),r.a.createElement(Ye.a,{value:1},"1"))),r.a.createElement(ze.a,{className:l.formControl},r.a.createElement(Qe.a,{name:"max",value:f,onChange:function(e){return S(0,e)},variant:"outlined"},r.a.createElement(Ye.a,{value:2},"2"),r.a.createElement(Ye.a,{value:3},"3"),r.a.createElement(Ye.a,{value:4},"4"),r.a.createElement(Ye.a,{value:5},"5"),r.a.createElement(Ye.a,{value:6},"6"),r.a.createElement(Ye.a,{value:7},"7"),r.a.createElement(Ye.a,{value:8},"8"),r.a.createElement(Ye.a,{value:9},"9"),r.a.createElement(Ye.a,{value:10},"10"))),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(oe.a,{value:b,name:"minText",placeholder:"Etiquette (optional)",onChange:function(e){return S(0,e)},InputProps:{classes:{underline:l.underlineLinear},startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement("span",null,u))}})),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(oe.a,{value:j,name:"maxText",placeholder:"Etiquette (optional)",onChange:function(e){return S(0,e)},InputProps:{classes:{underline:l.underlineLinear},startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement("span",null,f))}}))),r.a.createElement(B.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(ft.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"top"},r.a.createElement(k.a,{className:l.typographyLinear,noWrap:!0},b),function(){for(var e=[],t=u;t<=f;t++)e.push(r.a.createElement(Ze.a,{disabled:!0,key:t,control:r.a.createElement(dt.a,{color:"primary"}),label:t,labelPlacement:"top"}));return e}().map((function(e){return e})),r.a.createElement(k.a,{className:l.typographyLinear,noWrap:!0},j)))))},ht=a(44),Et=a.n(ht),bt=a(74),vt=a.n(bt),Ot=function(e){var t=e.handleOptions,a=e.handleOtherOption,o=e.index,i=e.section,l=void 0===i?null:i,c=Ge(),s=Object(n.useState)([]),u=Object(y.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(y.a)(d,2),h=f[0],E=f[1];Object(n.useEffect)((function(){if(l){for(var e=[],t=0;t<l.singleMultiDetails.options.length;t++){var a={startIcon:r.a.createElement(vt.a,null),placeholder:"Option ".concat(t+1),deleteIcon:r.a.createElement(Et.a,null),value:l.singleMultiDetails.options[t]};e.push(a)}p(e),E(l.singleMultiDetails.otherOption)}else p([{startIcon:r.a.createElement(vt.a,null),placeholder:"Option 1",deleteIcon:r.a.createElement(Et.a,null),value:""}])}),[l]);var b=function(e){var a=Object(g.a)(m);a.splice(e,1),p(a);var n=a.map((function(e){return e.value.trim()}));t(n,o)},v=function(e,a){var n=Object(g.a)(m);n[e].value=a.target.value,p(n);var r=n.map((function(e){return e.value.trim()}));t(r,o)};return r.a.createElement(B.a,{item:!0,xs:10},m.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(oe.a,{value:m[t].value,onChange:function(e){return v(t,e)},placeholder:e.placeholder,InputProps:{classes:{underline:c.underline},startAdornment:r.a.createElement(ie.a,{position:"start"},e.startIcon),endAdornment:m.length>=2&&r.a.createElement(Be.a,{title:"Delete option",placement:"right"},r.a.createElement(le.a,{className:c.singleChoiceOptionMargin,onClick:function(){return b(t)}},e.deleteIcon))}}))})),h&&r.a.createElement(oe.a,{placeholder:"Other option...",disabled:!0,InputProps:{classes:{underline:c.underline},startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement(vt.a,null)),endAdornment:r.a.createElement(Be.a,{title:"Delete option",placement:"right"},r.a.createElement(le.a,{className:c.singleChoiceOptionMargin,onClick:function(){return E(!1)}},r.a.createElement(Et.a,null)))}}),r.a.createElement("div",{className:c.singleChoiceButtonsContainer},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return e=m.length+1,void p([].concat(Object(g.a)(m),[{startIcon:r.a.createElement(vt.a,null),placeholder:"Option ".concat(e),deleteIcon:r.a.createElement(Et.a,null),value:""}]));var e}},"Add option"),!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,"or"),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){E(!0),a(!0,o)}},'Add option "other"'))))},yt=a(75),xt=a.n(yt),jt=function(e){var t=e.handleOptions,a=e.handleOtherOption,o=e.index,i=e.section,l=void 0===i?null:i,c=Ge(),s=Object(n.useState)([]),u=Object(y.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(y.a)(d,2),h=f[0],E=f[1];Object(n.useEffect)((function(){if(l){for(var e=[],t=0;t<l.singleMultiDetails.options.length;t++){var a={startIcon:r.a.createElement(xt.a,null),placeholder:"Option ".concat(t+1),deleteIcon:r.a.createElement(Et.a,null),value:l.singleMultiDetails.options[t]};e.push(a)}p(e),E(l.singleMultiDetails.otherOption)}else alert("TEST"),p([{startIcon:r.a.createElement(xt.a,null),placeholder:"Option 1",deleteIcon:r.a.createElement(Et.a,null),value:""}])}),[l]);var b=function(e){var a=Object(g.a)(m);a.splice(e,1),p(a);var n=a.map((function(e){return e.value.trim()}));t(n,o)},v=function(e,a){var n=Object(g.a)(m);n[e].value=a.target.value,p(n);var r=n.map((function(e){return e.value.trim()}));t(r,o)};return r.a.createElement(B.a,{item:!0,xs:10},m.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(oe.a,{value:m[t].value,onChange:function(e){return v(t,e)},placeholder:e.placeholder,InputProps:{classes:{underline:c.underline},startAdornment:r.a.createElement(ie.a,{position:"start"},e.startIcon),endAdornment:m.length>=2&&r.a.createElement(Be.a,{title:"Delete option",placement:"right"},r.a.createElement(le.a,{className:c.singleChoiceOptionMargin,onClick:function(){return b(t)}},e.deleteIcon))}}))})),h&&r.a.createElement(oe.a,{placeholder:"Other option...",disabled:!0,InputProps:{classes:{underline:c.underline},startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement(xt.a,null)),endAdornment:r.a.createElement(Be.a,{title:"Delete option",placement:"right"},r.a.createElement(le.a,{className:c.singleChoiceOptionMargin,onClick:function(){return E(!1)}},r.a.createElement(Et.a,null)))}}),r.a.createElement("div",{className:c.singleChoiceButtonsContainer},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return e=m.length+1,void p([].concat(Object(g.a)(m),[{startIcon:r.a.createElement(xt.a,null),placeholder:"Option ".concat(e),deleteIcon:r.a.createElement(Et.a,null),value:""}]));var e}},"Add option"),!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,"or"),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){E(!0),a(!0,o)}},'Add option "other"'))))},Ct=function(){return r.a.createElement(B.a,{item:!0,xs:10},r.a.createElement(oe.a,{placeholder:"Long text",fullWidth:!0,disabled:!0}))},St=function(){return r.a.createElement(B.a,{item:!0,xs:5},r.a.createElement(oe.a,{placeholder:"Short text",fullWidth:!0,disabled:!0}))},wt=function(e){var t=e.section,a=e.index,o=e.removeSection,i=e.handleChange,l=e.handleRequired,c=e.handleOptions,s=e.handleOtherOption,u=e.handleLinearScale,m=e.sectionNumber,p=e.handleDrag,d=e.handleDrop,f=Ge(),g=Object(n.useState)(!1),h=Object(y.a)(g,2),E=h[0],b=h[1];return Object(n.useEffect)((function(){b(t.required)}),[t]),r.a.createElement(M.a,{className:f.paper,elevation:6,style:{marginTop:"10px"},draggable:!0,id:m,onDragOver:function(e){return e.preventDefault()},onDragStart:p,onDrop:d},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:5},r.a.createElement(oe.a,{placeholder:"Question",variant:"filled",fullWidth:!0,value:t.questionText||"",onChange:function(e){return i(a,e,"questionText")}})),r.a.createElement(B.a,{item:!0,xs:12,sm:5},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(Je.a,{id:"questionType"},"Question type"),r.a.createElement(Qe.a,{labelId:"questionType",value:t.questionType,onChange:function(e){return i(a,e,"questionType")},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null}},Object.keys(ut).map((function(e,t){return r.a.createElement(Ye.a,{key:t,value:ut[e].value},r.a.createElement("span",null,ut[e].icon),r.a.createElement("span",{style:{marginLeft:"20px",fontSize:"20px"}},ut[e].text))}))))),a&&r.a.createElement(B.a,{item:!0,xs:2,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Me.a,{orientation:"vertical",variant:"contained",color:"primary"},r.a.createElement(Be.a,{title:"Delete question",placement:"bottom"},r.a.createElement(D.a,{onClick:function(){return o(a)}},r.a.createElement(pt.a,null))))),"shortText"===t.questionType?r.a.createElement(St,null):"longText"===t.questionType?r.a.createElement(Ct,null):"singleChoice"===t.questionType?r.a.createElement(jt,{handleOptions:c,handleOtherOption:s,index:a,section:t}):"multipleChoice"===t.questionType?r.a.createElement(Ot,{handleOptions:c,handleOtherOption:s,index:a,section:t}):r.a.createElement(gt,{handleLinearScale:u,index:a,section:t}),r.a.createElement(B.a,{item:!0,xs:10},r.a.createElement(Ve.a,{orientation:"horizontal"})),r.a.createElement(B.a,{item:!0,xs:10},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Xe.a,{"aria-label":"position",row:!0},r.a.createElement(Ze.a,{checked:E,onChange:function(){b(!E),l(t.required,a)},control:r.a.createElement(Ke.a,{color:"primary"}),label:"Required",labelPlacement:"start"}))))))},Tt=function e(){Object($e.a)(this,e),this._id="",this.userId="",this.title="",this.description="",this.sections=[]},kt=function e(t,a,n,r,o,i,l){Object($e.a)(this,e),this.id="",this.order=1,this.required=!1,this.questionText="",this.questionType="",this.singleMultiDetails=void 0,this.linearDetails=void 0,this.id=t,this.order=a,this.required=n,this.questionText=r,this.questionType=o,this.singleMultiDetails=i,this.linearDetails=l},Dt=function e(){Object($e.a)(this,e),this.options=[],this.otherOption=!1},Nt=function e(){Object($e.a)(this,e),this.min=0,this.minText="",this.max=10,this.maxText=""},Lt=function(){var e=Ge(),t=Object(N.g)(),a=Object(l.b)(),o=Object(l.c)((function(e){return e.error})).error,i=Object(n.useState)(!1),c=Object(y.a)(i,2),s=c[0],u=c[1],f=Object(n.useState)(),h=Object(y.a)(f,2),E=h[0],b=h[1],v=Object(n.useState)(1),O=Object(y.a)(v,2),x=O[0],j=O[1],C=Object(n.useState)(""),S=Object(y.a)(C,2),w=S[0],T=S[1],L=Object(n.useState)(""),I=Object(y.a)(L,2),q=I[0],A=I[1],W=localStorage.getItem("profile"),_=Object(n.useState)(JSON.parse(W)),G=Object(y.a)(_,2),R=G[0],H=(G[1],Object(n.useState)([new kt("Section-".concat(x),x,!1,"","shortText",new Dt,new Nt)])),z=Object(y.a)(H,2),J=z[0],Q=z[1];Object(n.useEffect)((function(){o&&u(!0)}),[o]);var Y=function(e,t){"clickaway"!==t&&(a({type:d,data:null}),u(!1))},V=function(e,t,a){var n=Object(g.a)(J);n[e][a]=t.target.value,Q(n)},X=function(e,t){var a=Object(g.a)(J);a[t].required=!e,Q(a)},Z=function(e,t){var a=Object(g.a)(J);a[t].singleMultiDetails.options=e,Q(a)},K=function(e,t){var a=Object(g.a)(J);a[t].singleMultiDetails.otherOption=e,Q(a)},ee=function(e,t){var a=Object(g.a)(J);a[t].linearDetails=e,Q(a)},te=function(e){var t=Object(g.a)(J);t.splice(e,1),Q(t),j(x-1)},ae=function(e){return b(e.currentTarget.id)},ne=function(e){var t=J.find((function(e){return e.id===E})),a=J.find((function(t){return t.id===e.currentTarget.id})),n=t.order,r=a.order,o=J.map((function(t){return t.id===E&&(t.order=r),t.id===e.currentTarget.id&&(t.order=n),t}));Q(o)},re=function(e){if(0===e.title.trim().length)return{ok:!1,error:"No form name"};if(0===e.description.trim().length)return{ok:!1,error:"No form description"};var t,a=Object(Pe.a)(e.sections);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(0===n.questionText.length)return{ok:!1,error:"No question text"};if(n.singleMultiDetails.options.length>0){var r,o=Object(Pe.a)(n.singleMultiDetails.options);try{for(o.s();!(r=o.n()).done;){if(0===r.value.length)return{ok:!1,error:"No option text"}}}catch(i){o.e(i)}finally{o.f()}}if(("singleChoice"===n.questionType||"multipleChoice"===n.questionType)&&0===n.singleMultiDetails.options.length)return{ok:!1,error:"No option text"}}}catch(i){a.e(i)}finally{a.f()}return{ok:!0}};return r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=new Tt;n.title=w.trim(),n.description=q.trim(),n.userId=R.result._id;var r,o=Object(Pe.a)(J);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=new kt(i.id,i.order,i.required,i.questionText,i.questionType,i.singleMultiDetails,i.linearDetails);n.sections.push(l)}}catch(s){o.e(s)}finally{o.f()}var c=re(n);if(!c.ok)return a({type:d,data:{error:c.error}});a(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,$(e);case 4:if(r=a.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){a.next=9;break}return n({type:d,data:o}),a.abrupt("return",t.push("/addForm"));case 9:n({type:p}),n({type:"CREATE",payload:o}),t.push("/"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(n,t))}},r.a.createElement(M.a,{className:e.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:10,alignItems:"center"},r.a.createElement(k.a,{component:"h1",variant:"h5",align:"center",gutterBottom:!0},"Add Form"),r.a.createElement(oe.a,{onChange:function(e){T(e.target.value)},value:w,placeholder:"Form name",fullWidth:!0,variant:"filled",inputProps:{style:{fontSize:40}},style:{fontSize:"30px",marginBottom:"30px"}}),r.a.createElement(oe.a,{onChange:function(e){A(e.target.value)},value:q,placeholder:"Form description",fullWidth:!0,style:{marginBottom:"30px"}})),r.a.createElement(B.a,{item:!0,xs:12,sm:2,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Me.a,{orientation:"vertical",variant:"contained",color:"primary"},r.a.createElement(Be.a,{title:"Add question",placement:"bottom"},r.a.createElement(D.a,{onClick:function(){return Q([].concat(Object(g.a)(J),[new kt("Section-".concat(x+1),x+1,!1,"","shortText",new Dt,new Nt)])),void j(x+1)}},r.a.createElement(He.a,null))))))),J.sort((function(e,t){return e.order-t.order})).map((function(e,t){return r.a.createElement(wt,{section:e,key:t,index:t,removeSection:te,handleChange:V,handleRequired:X,handleOptions:Z,handleOtherOption:K,handleLinearScale:ee,sectionNumber:e.id,handleDrag:ae,handleDrop:ne})})),r.a.createElement(D.a,{variant:"contained",color:"primary",fullWidth:!0,type:"submit"},"Save form")),r.a.createElement(de.a,{open:s,autoHideDuration:6e3,onClose:Y},r.a.createElement(ge,{onClose:Y,severity:"warning",className:e.alert},o)))},It=Object(x.a)((function(e){return Object(j.a)({root:{},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},icon:{margin:e.spacing(1)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},underlineLinear:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"20px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"20px"}},typographyLinear:{maxWidth:"150px",paddingTop:"30px"},singleChoiceOption:{fontSize:"13px",color:"#3f51b5","&:hover":{cursor:"pointer"}},singleChoiceButtonsContainer:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},singleChoiceOptionMargin:{marginLeft:"140px","&:hover":{cursor:"pointer"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),qt=function(){var e=Object(N.i)().id,t=It(),a=Object(N.g)(),o=Object(l.b)(),i=Object(l.c)((function(e){return e.forms})),c=i.form,s=i.isLoading,u=Object(l.c)((function(e){return e.error})).error,f=Object(n.useState)(!1),h=Object(y.a)(f,2),E=h[0],b=h[1],v=Object(n.useState)(),O=Object(y.a)(v,2),x=O[0],j=O[1],C=Object(n.useState)(1),S=Object(y.a)(C,2),w=S[0],T=S[1],L=Object(n.useState)(null===c||void 0===c?void 0:c.title),I=Object(y.a)(L,2),q=I[0],A=I[1],W=Object(n.useState)(""),_=Object(y.a)(W,2),G=_[0],R=_[1],H=localStorage.getItem("profile"),z=Object(n.useState)(JSON.parse(H)),Q=Object(y.a)(z,2),Y=Q[0],V=(Q[1],Object(n.useState)([])),X=Object(y.a)(V,2),Z=X[0],K=X[1];Object(n.useEffect)((function(){u&&b(!0)}),[u]),Object(n.useEffect)((function(){o(Se(e))}),[e]),Object(n.useEffect)((function(){c&&(A(c.title),R(c.description),K(c.sections))}),[c]);var $=function(e,t){"clickaway"!==t&&(o({type:d,data:null}),b(!1))},ee=function(e,t,a){var n=Object(g.a)(Z);n[e][a]=t.target.value,K(n)},te=function(e,t){var a=Object(g.a)(Z);a[t].required=!e,K(a)},ae=function(e,t){var a=Object(g.a)(Z);a[t].singleMultiDetails.options=e,K(a)},ne=function(e,t){var a=Object(g.a)(Z);a[t].singleMultiDetails.otherOption=e,K(a)},re=function(e,t){var a=Object(g.a)(Z);a[t].linearDetails=e,K(a)},ie=function(e){var t=Object(g.a)(Z);t.splice(e,1),K(t),T(w-1)},le=function(e){return j(e.currentTarget.id)},ce=function(e){var t=Z.find((function(e){return e.id===x})),a=Z.find((function(t){return t.id===e.currentTarget.id})),n=t.order,r=a.order,o=Z.map((function(t){return t.id===x&&(t.order=r),t.id===e.currentTarget.id&&(t.order=n),t}));K(o)},se=function(e){if(0===e.title.trim().length)return{ok:!1,error:"No form name"};if(0===e.description.trim().length)return{ok:!1,error:"No form description"};var t,a=Object(Pe.a)(e.sections);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(0===n.questionText.length)return{ok:!1,error:"No question text"};if(n.singleMultiDetails.options.length>0){var r,o=Object(Pe.a)(n.singleMultiDetails.options);try{for(o.s();!(r=o.n()).done;){if(0===r.value.length)return{ok:!1,error:"No option text"}}}catch(i){o.e(i)}finally{o.f()}}if(("singleChoice"===n.questionType||"multipleChoice"===n.questionType)&&0===n.singleMultiDetails.options.length)return{ok:!1,error:"No option text"}}}catch(i){a.e(i)}finally{a.f()}return{ok:!0}};return s?r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement(M.a,{elevation:6,className:t.loadingPaper,style:{marginTop:"80px"}},r.a.createElement(xe.a,{size:"7em",color:"secondary"}))):r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=new Tt;n.title=q.trim(),n.description=G.trim(),n.userId=Y.result._id,n._id=e;var r,i=Object(Pe.a)(Z);try{for(i.s();!(r=i.n()).done;){var l=r.value,c=new kt(l.id,l.order,l.required,l.questionText,l.questionType,l.singleMultiDetails,l.linearDetails);n.sections.push(c)}}catch(u){i.e(u)}finally{i.f()}var s=se(n);if(!s.ok)return o({type:d,data:{error:s.error}});o(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,i=e._id,l=e,J.patch("/forms/".concat(i),l);case 4:if(r=a.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){a.next=9;break}return n({type:d,data:o}),a.abrupt("return",t.push("/editForm/".concat(e._id)));case 9:return n({type:"UPDATE",payload:o}),n({type:"UPDATE_SUCCESSFUL",payload:!0}),n({type:p}),a.abrupt("return",t.push("/forms"));case 15:a.prev=15,a.t0=a.catch(0),console.log(a.t0);case 18:case"end":return a.stop()}var i,l}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}()}(n,a))}},r.a.createElement(M.a,{className:t.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:10,alignItems:"center"},r.a.createElement(k.a,{component:"h1",variant:"h5",align:"center",gutterBottom:!0},"Edit Form"),r.a.createElement(oe.a,{onChange:function(e){A(e.target.value)},value:q,placeholder:"Form name",fullWidth:!0,variant:"filled",inputProps:{style:{fontSize:40}},style:{fontSize:"30px",marginBottom:"30px"}}),r.a.createElement(oe.a,{onChange:function(e){R(e.target.value)},value:G,placeholder:"Form description",fullWidth:!0,style:{marginBottom:"30px"}})),r.a.createElement(B.a,{item:!0,xs:12,sm:2,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Me.a,{orientation:"vertical",variant:"contained",color:"primary"},r.a.createElement(Be.a,{title:"Add question",placement:"bottom"},r.a.createElement(D.a,{onClick:function(){return K([].concat(Object(g.a)(Z),[new kt("Section-".concat(w+1),w+1,!1,"","shortText",new Dt,new Nt)])),void T(w+1)}},r.a.createElement(He.a,null))))))),Z.sort((function(e,t){return e.order-t.order})).map((function(e,t){return r.a.createElement(wt,{section:e,key:t,index:t,removeSection:ie,handleChange:ee,handleRequired:te,handleOptions:ae,handleOtherOption:ne,handleLinearScale:re,sectionNumber:e.id,handleDrag:le,handleDrop:ce})})),r.a.createElement(D.a,{variant:"contained",color:"primary",fullWidth:!0,type:"submit"},"Save form")),r.a.createElement(de.a,{open:E,autoHideDuration:6e3,onClose:$},r.a.createElement(ge,{onClose:$,severity:"warning",className:t.alert},u)))},At=function e(t,a,n){Object($e.a)(this,e),this.text="",this.singleOption="",this.multiOptions=[],this.linearOption=-1,this.questionType="",this.required=!1,this.questionText="",this.questionType=t,this.required=a,this.questionText=n},Wt=function e(t){Object($e.a)(this,e),this.formId="",this.nick="",this.answers=[],this.formId=t},_t=function(e){var t=e.section,a=e.handleLinearOption,o=e.index,i=Object(n.useState)(-1),l=Object(y.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){a(c,o)}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(ft.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"top"},r.a.createElement(k.a,{style:{maxWidth:"150px",paddingTop:"30px"},noWrap:!0},t.linearDetails.minText),function(){for(var e=[],a=function(t){e.push(r.a.createElement(Ze.a,{checked:c===t,onChange:function(){return s(t)},key:t,control:r.a.createElement(dt.a,{color:"primary"}),label:t,labelPlacement:"top"}))},n=t.linearDetails.min;n<=t.linearDetails.max;n++)a(n);return e}().map((function(e){return e})),r.a.createElement(k.a,{style:{maxWidth:"150px",paddingTop:"30px"},noWrap:!0},t.linearDetails.maxText)))),c>=0&&r.a.createElement(B.a,{item:!0,xs:12,style:{textAlign:"center"}},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return s(-1)}},"Uncheck")))},Ft=function(e){e.section;var t=e.handleTextChange,a=e.index;return r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(oe.a,{id:"standard-required",label:"Answer",fullWidth:!0,onChange:function(e){return t(a,e)}}))},Ut=a(178),Pt=a(250),Mt=function(e){var t=e.section,a=e.handleMultipleOptions,o=e.index,i=Object(n.useState)({}),l=Object(y.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){for(var e={},a=0;a<t.singleMultiDetails.options.length;a++)e[t.singleMultiDetails.options[a]]=!1;t.singleMultiDetails.otherOption&&(e.otherOption=""),s(e)}),[]),Object(n.useEffect)((function(){a(c,o)}),[c]);var m=function(e){s(Object(u.a)(Object(u.a)({},c),{},Object(W.a)({},e.target.name,e.target.checked)))};return r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Ut.a,{component:"legend"},"Choose option"),r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Xe.a,null,t.singleMultiDetails.options.map((function(e,t){return r.a.createElement(Ze.a,{key:t,control:r.a.createElement(Pt.a,{color:"primary",checked:c[e]||!1,onChange:m,name:e}),label:e})})))),t.singleMultiDetails.otherOption&&r.a.createElement(oe.a,{id:"standard-required",label:"Other option",value:c.otherOption,name:"otherOption",onChange:function(e){return s(Object(u.a)(Object(u.a)({},c),{},Object(W.a)({},e.target.name,e.target.value)))}})))},Bt=function(e){e.section;var t=e.handleTextChange,a=e.index;return r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(oe.a,{id:"standard-required",label:"Answer",onChange:function(e){return t(a,e)}}))},Gt=function(e){var t=e.section,a=e.handleSingleOption,o=e.index,i=Object(n.useState)(""),l=Object(y.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(""),m=Object(y.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(""),g=Object(y.a)(f,2),h=g[0],E=g[1];return Object(n.useEffect)((function(){a(h,o)}),[h]),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Ut.a,{component:"legend"},"Choose only one option"),r.a.createElement(ft.a,{"aria-label":"singleChoice",name:"singleChoice",value:c,onChange:function(e){s(e.target.value),E(e.target.value),d("")}},t.singleMultiDetails.options.map((function(e,t){return r.a.createElement(Ze.a,{key:t,value:e,control:r.a.createElement(dt.a,{color:"primary"}),label:e})}))),t.singleMultiDetails.otherOption&&r.a.createElement(oe.a,{id:"standard-required",label:"Other answer",value:p,disabled:c.length>0,onChange:function(e){d(e.target.value),E(e.target.value)}}))),c&&r.a.createElement(B.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){s(""),E("")}},"Uncheck")))},Rt=Object(x.a)((function(e){return Object(j.a)({root:{},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},icon:{margin:e.spacing(1)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},underlineLinear:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"20px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"20px"}},typographyLinear:{maxWidth:"150px",paddingTop:"30px"},singleChoiceOption:{fontSize:"13px",color:"#3f51b5","&:hover":{cursor:"pointer"}},singleChoiceButtonsContainer:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},singleChoiceOptionMargin:{marginLeft:"140px","&:hover":{cursor:"pointer"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),Ht=function(){var e=Object(N.g)(),t=Object(N.i)().id,a=Object(l.b)(),o=Rt(),i=Object(l.c)((function(e){return e.forms})),c=i.form,s=i.isLoading,u=Object(l.c)((function(e){return e.error})).error,f=Object(n.useState)(!1),g=Object(y.a)(f,2),h=g[0],E=g[1],b=Object(n.useState)(""),v=Object(y.a)(b,2),O=v[0],x=v[1],j=Object(n.useState)(null),C=Object(y.a)(j,2),S=C[0],w=C[1];Object(n.useEffect)((function(){a(Se(t))}),[t]),Object(n.useEffect)((function(){u&&E(!0)}),[u]),Object(n.useEffect)((function(){if(S){var e=S;e.nick=O,w(e)}}),[O]),Object(n.useEffect)((function(){var e=[];if(c){var t,a=Object(Pe.a)(c.sections);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=new At(n.questionType,n.required,n.questionText);e.push(r)}}catch(i){a.e(i)}finally{a.f()}var o=new Wt(c._id);o.answers=e,w(o)}}),[c]);var T=function(e,t){"clickaway"!==t&&(a({type:d,data:null}),E(!1))},L=function(e,t){var a=JSON.parse(JSON.stringify(S));a.answers[e].text=t.target.value,w(a)},I=function(e,t){var a=JSON.parse(JSON.stringify(S));a&&(a.answers[t].singleOption=e,w(a))},q=function(e,t){var a,n=JSON.parse(JSON.stringify(S)),r=[],o=Object(Pe.a)(Object.getOwnPropertyNames(e));try{for(o.s();!(a=o.n()).done;){var i=a.value;"otherOption"!==i?e[i]&&r.push(i):"otherOption"===i&&e.otherOption.trim().length>0&&r.push(e.otherOption)}}catch(l){o.e(l)}finally{o.f()}n&&(n.answers[t].multiOptions=r,w(n))},A=function(e,t){var a=JSON.parse(JSON.stringify(S));a&&(a.answers[t].linearOption=e,w(a))},W=function(e){if(0===O.trim().length)return{ok:!1,error:"No nick given"};var t,a=Object(Pe.a)(e.answers);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.required&&("shortText"===n.questionType||"longText"===n.questionType)&&0===n.text.trim().length)return{ok:!1,error:"No text answer given"};if(n.required&&"singleChoice"===n.questionType&&0===n.singleOption.trim().length)return{ok:!1,error:"No single choice answer given"};if(n.required&&"multipleChoice"===n.questionType&&0===n.multiOptions.length)return{ok:!1,error:"No multiple choice answer given"};if(n.required&&"linearScale"===n.questionType&&-1===n.linearOption)return{ok:!1,error:"No linear answer given"}}}catch(r){a.e(r)}finally{a.f()}return{ok:!0}};return s?r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement(M.a,{elevation:6,className:o.loadingPaper,style:{marginTop:"80px"}},r.a.createElement(xe.a,{size:"7em",color:"secondary"}))):c?r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=W(S);if(!n.ok)return a({type:d,data:{error:n.error}});a(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,ae(e);case 4:if(r=a.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){a.next=9;break}return n({type:d,data:o}),a.abrupt("return",t.push("/answerForm/".concat(e.formId)));case 9:return n({type:"ADD_ANSWER_SUCCESSFUL",payload:!0}),n({type:p}),a.abrupt("return",t.push("/forms"));case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(S,e))}},r.a.createElement(M.a,{className:o.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,alignItems:"center"},r.a.createElement(k.a,{component:"h1",variant:"h5",align:"center",gutterBottom:!0},"Add answer"),r.a.createElement(k.a,{component:"h1",variant:"h6"},r.a.createElement("span",{style:{fontWeight:300}},"Form title: "),c.title),r.a.createElement(k.a,{gutterBottom:!0,component:"h1",variant:"h6"},r.a.createElement("span",{style:{fontWeight:300}},"Form description: "),c.description),r.a.createElement(oe.a,{label:"Your nick *",value:O,onChange:function(e){return x(e.target.value)}})))),c.sections.map((function(e,t){return r.a.createElement(M.a,{key:t,className:o.paper,elevation:6,style:{marginTop:"10px"}},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:5},r.a.createElement(k.a,{component:"h1",variant:"h6",gutterBottom:!0,noWrap:!0},r.a.createElement("span",{style:{fontWeight:300}},"Question",e.required&&"*"," :")," ",e.questionText)),"shortText"===e.questionType?r.a.createElement(Bt,{section:e,handleTextChange:L,index:t}):"longText"===e.questionType?r.a.createElement(Ft,{section:e,handleTextChange:L,index:t}):"singleChoice"===e.questionType?r.a.createElement(Gt,{section:e,handleSingleOption:I,index:t}):"multipleChoice"===e.questionType?r.a.createElement(Mt,{section:e,handleMultipleOptions:q,index:t}):r.a.createElement(_t,{section:e,handleLinearOption:A,index:t})))})),r.a.createElement(D.a,{variant:"contained",color:"primary",fullWidth:!0,type:"submit"},"Save answer")),r.a.createElement(de.a,{open:h,autoHideDuration:6e3,onClose:T},r.a.createElement(ge,{onClose:T,severity:"warning",className:o.alert},u))):null},zt=a(238),Jt=a(239),Qt=a(252),Yt=a(240),Vt=a(241),Xt=a(242),Zt=a(243),Kt=a(244),$t=a(245),ea=a(128),ta=a.n(ea),aa=Object(x.a)((function(e){return Object(j.a)({root:{},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},icon:{margin:e.spacing(1)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},underlineLinear:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"20px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"20px"}},typographyLinear:{maxWidth:"150px",paddingTop:"30px"},singleChoiceOption:{fontSize:"13px",color:"#3f51b5","&:hover":{cursor:"pointer"}},singleChoiceButtonsContainer:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},singleChoiceOptionMargin:{marginLeft:"140px","&:hover":{cursor:"pointer"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},table:{minWidth:650}})})),na=function(){var e=Object(l.b)(),t=aa(),a=Object(l.c)((function(e){return e.forms})),o=a.form,i=a.isLoading,c=Object(l.c)((function(e){return e.answers})).answers,s=Object(N.i)().id;if(Object(n.useEffect)((function(){e(Se(s))}),[s]),Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(U.a)(F.a.mark((function t(a){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te(e);case 3:return n=t.sent,r=n.data,a({type:"GET_ANSWERS",payload:r}),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(s))}),[s]),i)return r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement(M.a,{elevation:6,className:t.loadingPaper,style:{marginTop:"80px"}},r.a.createElement(xe.a,{size:"7em",color:"secondary"})));if(!o)return null;if(!c)return null;return r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement(M.a,{className:t.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,alignItems:"center"},r.a.createElement(k.a,{component:"h1",variant:"h5",align:"center",gutterBottom:!0},"Answers"),r.a.createElement(k.a,{component:"h1",variant:"h6"},r.a.createElement("span",{style:{fontWeight:300}},"Form title: "),o.title),r.a.createElement(k.a,{gutterBottom:!0,component:"h1",variant:"h6"},r.a.createElement("span",{style:{fontWeight:300}},"Form description: "),o.description)))),c.length>0?c.map((function(e,a){return r.a.createElement(Qt.a,{key:a},r.a.createElement(Yt.a,{expandIcon:r.a.createElement(ta.a,null),"aria-controls":"panel1a-content"},r.a.createElement(k.a,{className:t.heading},"Answer author: ",e.nick)),r.a.createElement(Vt.a,{style:{display:"block"}},r.a.createElement(Xt.a,null,r.a.createElement(Zt.a,{className:t.table,size:"small","aria-label":"a dense table"},r.a.createElement(Kt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Jt.a,null,"Question"),r.a.createElement(Jt.a,{align:"right"},"Question type"),r.a.createElement(Jt.a,{align:"right"},"Required answer"),r.a.createElement(Jt.a,{align:"right"},"Answer"))),r.a.createElement($t.a,null,e.answers&&e.answers.map((function(e,t){return function(e,t){return"shortText"===e.questionType?r.a.createElement(zt.a,{key:t},r.a.createElement(Jt.a,{component:"th",scope:"row"},r.a.createElement(k.a,null,e.questionText)),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,"Short text")),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,e.required?"YES":"NO")),r.a.createElement(Jt.a,{align:"right"},e.text?e.text:"(no answer)")):"longText"===e.questionType?r.a.createElement(zt.a,{key:t},r.a.createElement(Jt.a,{component:"th",scope:"row"},r.a.createElement(k.a,null,e.questionText)),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,"Long text")),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,e.required?"YES":"NO")),r.a.createElement(Jt.a,{align:"right"},e.text?e.text:"(no answer)")):"singleChoice"===e.questionType?r.a.createElement(zt.a,{key:t},r.a.createElement(Jt.a,{component:"th",scope:"row"},r.a.createElement(k.a,null,e.questionText)),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,"Single choice")),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,e.required?"YES":"NO")),r.a.createElement(Jt.a,{align:"right"},e.singleOption?e.singleOption:"(no answer)")):"multipleChoice"===e.questionType?r.a.createElement(zt.a,{key:t},r.a.createElement(Jt.a,{component:"th",scope:"row"},r.a.createElement(k.a,null,e.questionText)),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,"Multiple choice")),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,e.required?"YES":"NO")),r.a.createElement(Jt.a,{align:"right"},e.multiOptions&&e.multiOptions.length>0?e.multiOptions.join(", "):"(no answer)")):"linearScale"===e.questionType?r.a.createElement(zt.a,{key:t},r.a.createElement(Jt.a,{component:"th",scope:"row"},r.a.createElement(k.a,null,e.questionText)),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,"Linear scale")),r.a.createElement(Jt.a,{align:"right"},r.a.createElement(k.a,null,e.required?"YES":"NO")),r.a.createElement(Jt.a,{align:"right"},e.linearOption?e.linearOption:"(no answer)")):void 0}(e,t)})))))))})):r.a.createElement(Qt.a,null,r.a.createElement(Yt.a,{"aria-controls":"panel1a-content"},r.a.createElement(k.a,{className:t.heading},"No answers"))))},ra=function e(){Object($e.a)(this,e),this._id="",this.userId="",this.title="",this.description="",this.cadence="",this.complete=!1},oa=Object(x.a)((function(e){return Object(j.a)({paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),ia=function(){var e=oa(),t=Object(N.g)(),a=Object(l.b)(),o=Object(l.c)((function(e){return e.error})).error,i=Object(n.useState)(!1),c=Object(y.a)(i,2),s=c[0],u=c[1],f=Object(n.useState)(""),g=Object(y.a)(f,2),h=g[0],E=g[1],b=Object(n.useState)(""),v=Object(y.a)(b,2),O=v[0],x=v[1],j=Object(n.useState)(""),C=Object(y.a)(j,2),S=C[0],w=C[1],T=Object(n.useState)(!1),L=Object(y.a)(T,2),I=L[0],q=L[1],A=localStorage.getItem("profile"),W=Object(n.useState)(JSON.parse(A)),_=Object(y.a)(W,2),G=_[0];_[1];Object(n.useEffect)((function(){o&&u(!0)}),[o]);var R=function(e){return 0===e.title.trim().length?{ok:!1,error:"No goal title"}:0===e.description.trim().length?{ok:!1,error:"No goal description"}:{ok:!0}},H=function(e,t){"clickaway"!==t&&(a({type:d,data:null}),u(!1))};return r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=G.result,r=n.googleId,o=new ra;o.title=h.trim(),o.description=O.trim(),o.cadence=S,o.complete=I,o.userId=r||n._id;var i=R(o);if(!i.ok)return a({type:d,data:{error:i.error}});a(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,X(e);case 4:if(r=a.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){a.next=9;break}return n({type:d,data:o}),a.abrupt("return",t.push("/addGoal"));case 9:n({type:p}),n({type:"CREATE",payload:o}),t.push("/"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(o,t))}},r.a.createElement(M.a,{className:e.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:10},r.a.createElement(k.a,{component:"h2",variant:"h5",align:"center",gutterBottom:!0},"Add Goal"),r.a.createElement(oe.a,{onChange:function(e){E(e.target.value)},value:h,label:"Goal Name",placeholder:"Enter goal Name",fullWidth:!0}),r.a.createElement(oe.a,{onChange:function(e){x(e.target.value)},label:"Goal Description",value:O,placeholder:"Enter goal description",fullWidth:!0}),r.a.createElement(oe.a,{onChange:function(e){w(e.target.value)},label:"Goal Cadence",value:S,placeholder:"Enter goal cadence",fullWidth:!0}),r.a.createElement(Ze.a,{label:"Complete?",control:r.a.createElement(Pt.a,{onChange:function(e){q(!I)},value:I,placeholder:"Goal complete?"})}),r.a.createElement(B.a,{item:!0,xs:12,sm:2,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(D.a,{type:"submit"},"Submit")))))),r.a.createElement(de.a,{open:s,autoHideDuration:6e3,onClose:H},r.a.createElement(ge,{onClose:H,severity:"warning",className:e.alert},o)))},la=Object(x.a)((function(e){return Object(j.a)({root:{},paper:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},icon:{margin:e.spacing(1)},alert:{backgroundColor:"#f50057"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh",marginTop:"1rem"},underline:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"30px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"30px"}},underlineLinear:{"&::after":{border:"2px solid #3f51b5",width:"300px",marginLeft:"20px"},"&::before":{borderBottom:"2px solid #3f51b5",width:"300px",marginLeft:"20px"}},typographyLinear:{maxWidth:"150px",paddingTop:"30px"},singleChoiceOption:{fontSize:"13px",color:"#3f51b5","&:hover":{cursor:"pointer"}},singleChoiceButtonsContainer:{marginTop:"20px",display:"flex",justifyContent:"space-around",alignItems:"center"},singleChoiceOptionMargin:{marginLeft:"140px","&:hover":{cursor:"pointer"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),ca=function(){var e=Object(N.i)().id,t=la(),a=Object(N.g)(),o=Object(l.b)(),i=Object(l.c)((function(e){return e.goals})),c=i.goal,s=i.isLoading,u=Object(l.c)((function(e){return e.error})).error,f=Object(n.useState)(!1),g=Object(y.a)(f,2),h=g[0],E=g[1],b=Object(n.useState)(null===c||void 0===c?void 0:c.title),v=Object(y.a)(b,2),O=v[0],x=v[1],j=Object(n.useState)(""),C=Object(y.a)(j,2),S=C[0],w=C[1],T=Object(n.useState)("Daily"),L=Object(y.a)(T,2),I=L[0],q=L[1],A=Object(n.useState)(!1),W=Object(y.a)(A,2),_=W[0],G=W[1],R=localStorage.getItem("profile"),H=Object(n.useState)(JSON.parse(R)),z=Object(y.a)(H,2),Q=z[0];z[1];Object(n.useEffect)((function(){u&&E(!0)}),[u]),Object(n.useEffect)((function(){console.log("Goal ID: ",e),o(function(e){return function(){var t=Object(U.a)(F.a.mark((function t(a){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:m}),t.next=4,V(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_GOAL",payload:{goal:r}}),a({type:p}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[e]),Object(n.useEffect)((function(){console.log("Goal: ",c),c&&(x(c.title),w(c.description),q(c.cadence),G(c.complete))}),[c]);var Y=function(e,t){"clickaway"!==t&&(o({type:d,data:null}),E(!1))},X=function(e){return 0===e.title.trim().length?{ok:!1,error:"No goal name"}:0===e.description.trim().length?{ok:!1,error:"No goal description"}:{ok:!0}};return s?r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement(M.a,{elevation:6,className:t.loadingPaper,style:{marginTop:"80px"}},r.a.createElement(xe.a,{size:"7em",color:"secondary"}))):r.a.createElement(P.a,{component:"main",style:{marginTop:"100px"}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=new ra;n.title=O.trim(),n.description=S.trim(),n.cadence=I,n.complete=_,n.userId=Q.result._id,n._id=e;var r=X(n);if(!r.ok)return o({type:d,data:{error:r.error}});o(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,i=e._id,l=e,J.patch("/goals/".concat(i),l);case 4:if(r=a.sent,!(null===(o=r.data)||void 0===o?void 0:o.error)){a.next=9;break}return n({type:d,data:o}),a.abrupt("return",t.push("/editGoal/".concat(e._id)));case 9:return n({type:"UPDATE",payload:o}),n({type:"UPDATE_SUCCESSFUL",payload:!0}),n({type:p}),a.abrupt("return",t.push("/goals"));case 15:a.prev=15,a.t0=a.catch(0),console.log(a.t0);case 18:case"end":return a.stop()}var i,l}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}()}(n,a))}},r.a.createElement(M.a,{className:t.paper,elevation:6},r.a.createElement(B.a,{container:!0,spacing:3},r.a.createElement(B.a,{item:!0,xs:12,sm:10,alignItems:"center"},r.a.createElement(k.a,{component:"h2",variant:"h5",align:"center",gutterBottom:!0},"Edit Goal"),r.a.createElement(oe.a,{onChange:function(e){x(e.target.value)},value:O,placeholder:"Goal name",fullWidth:!0}),r.a.createElement(oe.a,{onChange:function(e){w(e.target.value)},value:S,placeholder:"Goal description",fullWidth:!0}),r.a.createElement(oe.a,{onChange:function(e){q(e.target.value)},label:"Goal Cadence",value:I,placeholder:"Enter goal cadence",fullWidth:!0}),r.a.createElement(Ze.a,{label:"Complete?",control:r.a.createElement(Pt.a,{onChange:function(e){G(!_)},value:_,placeholder:"Goal complete?"})})))),r.a.createElement(D.a,{variant:"contained",color:"primary",fullWidth:!0,type:"submit"},"Save goal")),r.a.createElement(de.a,{open:h,autoHideDuration:6e3,onClose:Y},r.a.createElement(ge,{onClose:Y,severity:"warning",className:t.alert},u)))},sa=function(){return r.a.createElement("div",null,"Dashboard")},ua=Object(x.a)((function(e){return Object(j.a)({root:{flexGrow:1,height:"250px"},loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"4px",height:"75vh",width:"100%",marginTop:"20px"},title:{fontSize:14}})})),ma=function(e){var t=e.goal,a=t.title,n=t.description,o=t.cadence,i=t.complete,c=t.userId,s=ua(),u=Object(N.g)(),d=Object(l.b)(),f=localStorage.getItem("profile"),g=JSON.parse(f),h=(g||{result:{}}).result||{googleId:{},_id:{}},E=h.googleId,b=h._id,v=E||b;return console.log("UserID: ",v),r.a.createElement(B.a,{item:!0,xs:12,md:6,lg:3,style:{marginTop:"10px"}},r.a.createElement(we.a,{className:s.root,raised:!0},r.a.createElement(Te.a,null,r.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},a),r.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p",gutterBottom:!0,noWrap:!0},"Description: ",n),r.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p",gutterBottom:!0,noWrap:!0},"Cadence: ",o),r.a.createElement(Ze.a,{label:"Complete?",control:r.a.createElement(Pt.a,{disabled:!0,value:i,placeholder:"Goal complete?"})})),r.a.createElement(ke.a,null,g&&0!==Object.keys(g).length&&v===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{title:"Edit goal","aria-label":"edit goal",onClick:function(){return u.push("/editGoal/".concat(e.goal._id))}},r.a.createElement(Ie.a,{fontSize:"large",color:"secondary"})),r.a.createElement(le.a,{title:"Delete goal","aria-label":"delete goal",onClick:function(){return d(function(e,t){return function(){var a=Object(U.a)(F.a.mark((function a(n){return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:m}),a.next=4,Z(e);case 4:return n({type:"DELETE",payload:e}),n({type:"DELETE_SUCCESSFUL",payload:!0}),n({type:p}),a.abrupt("return",t.push("/"));case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(e.goal._id,u))}},r.a.createElement(Ne.a,{fontSize:"large",color:"secondary"}))))))},pa=function(){var e=Object(l.c)((function(e){return e.goals})),t=e.goals,a=e.isLoading,o=e.updateSuccessful,i=e.deleteSuccessful,c=Object(l.c)((function(e){return e.answers})).addAnswerSuccessful,s=Object(N.g)(),u=ua(),d=Object(l.b)(),f=localStorage.getItem("profile"),g=Object(n.useState)(!1),h=Object(y.a)(g,2),E=h[0],b=h[1],v=Object(n.useState)(!1),O=Object(y.a)(v,2),x=O[0],j=O[1],C=Object(n.useState)(!1),S=Object(y.a)(C,2),w=(S[0],S[1]),T=Object(n.useState)(JSON.parse(f)),k=Object(y.a)(T,2),L=k[0];k[1];Object(n.useEffect)((function(){o&&b(!0)}),[o]),Object(n.useEffect)((function(){i&&j(i)}),[i]),Object(n.useEffect)((function(){c&&w(c)}),[c]),Object(n.useEffect)((function(){var e=(L||{user:{}}).result;console.log("Result: ",e);var t=(null===e||void 0===e?void 0:e.googleId)||(null===e||void 0===e?void 0:e._id);console.log("UserID: ",t),d(function(e){return function(){var t=Object(U.a)(F.a.mark((function t(a){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:m}),t.next=4,o=e,J.get("/goals/users/".concat(o));case 4:n=t.sent,r=n.data.data,a({type:"FETCH_GOALS",payload:{data:r}}),a({type:p}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}var o}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[d]);var I=function(e,t){"clickaway"!==t&&(d({type:"UPDATE_SUCCESSFUL",payload:!1}),b(!1))},q=function(e,t){"clickaway"!==t&&(d({type:"DELETE_SUCCESSFUL",payload:!1}),j(!1))};return r.a.createElement(P.a,{style:{marginTop:"100px"}},(null===L||void 0===L?void 0:L.result)&&r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return s.push("/addGoal")}},"Add goal"),a?r.a.createElement(M.a,{elevation:6,className:u.loadingPaper},r.a.createElement(xe.a,{size:"7em",color:"primary",value:100})):r.a.createElement(je.a,{in:!0,timeout:{enter:1500}},r.a.createElement(B.a,{container:!0,spacing:3},null===t||void 0===t?void 0:t.map((function(e,t){return r.a.createElement(ma,{goal:e,key:t})})))),r.a.createElement(de.a,{open:E,autoHideDuration:6e3,onClose:I},r.a.createElement(ge,{onClose:I,severity:"success"},"Edit successful")),r.a.createElement(de.a,{open:x,autoHideDuration:6e3,onClose:q},r.a.createElement(ge,{onClose:q,severity:"success"},"Delete successful")))},da=function(){return r.a.createElement(N.d,null,r.a.createElement(N.b,{path:"/",exact:!0,component:function(){return r.a.createElement(N.a,{to:"/goals"})}}),r.a.createElement(N.b,{path:"/dashboard",exact:!0,component:sa}),r.a.createElement(N.b,{path:"/addGoal",exact:!0,component:ia}),r.a.createElement(N.b,{path:"/editGoal/:id",exact:!0,component:ca}),r.a.createElement(N.b,{path:"/goals",exact:!0,component:pa}),r.a.createElement(N.b,{path:"/forms",exact:!0,component:Ue}),r.a.createElement(N.b,{path:"/loginUser",exact:!0,component:Ee}),r.a.createElement(N.b,{path:"/register",exact:!0,component:ye}),r.a.createElement(N.b,{path:"/addForm",exact:!0,component:Lt}),r.a.createElement(N.b,{path:"/editForm/:id",exact:!0,component:qt}),r.a.createElement(N.b,{path:"/answerForm/:id",exact:!0,component:Ht}),r.a.createElement(N.b,{path:"/showAnswers/:id",exact:!0,component:na}),r.a.createElement(N.b,{path:"/unauthorized",exact:!0,component:be}))},fa=Object(O.a)({typography:{fontFamily:'"Open Sans", sans-serif',fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:700},palette:{primary:{main:"#8316e2"},secondary:{main:"#75e216"},warning:{main:"#e21675"}}}),ga=function(){return r.a.createElement(b.a,null,r.a.createElement(v.a,{theme:fa},r.a.createElement(A,null,r.a.createElement(da,null))))},ha=Object(c.d)(E,Object(c.c)(Object(c.a)(s.a)));i.a.render(r.a.createElement(l.a,{store:ha},r.a.createElement(ga,null)),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.ad105e42.chunk.js.map